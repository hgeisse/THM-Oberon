//
// test_03.mem -- write and read bytes and words to/from RAM
//

	// write 4 bytes into the same word at different offsets
40001234	//		MOV     R0,0x00001234
41000011	//		MOV     R1,0x00000011
B1000000	//		STB     R1,R0,+00000
41000022	//		MOV     R1,0x00000022
B1000001	//		STB     R1,R0,+00001
41000033	//		MOV     R1,0x00000033
B1000002	//		STB     R1,R0,+00002
41000044	//		MOV     R1,0x00000044
B1000003	//		STB     R1,R0,+00003

	// read 4 bytes from the same word at different offsets
91000000	//		LDB     R1,R0,+00000
41190011	//		SUB     R1,R1,0x00000011
E9000022	//		BNE     fail
91000001	//		LDB     R1,R0,+00001
41190022	//		SUB     R1,R1,0x00000022
E900001F	//		BNE     fail
91000002	//		LDB     R1,R0,+00002
41190033	//		SUB     R1,R1,0x00000033
E900001C	//		BNE     fail
91000003	//		LDB     R1,R0,+00003
41190044	//		SUB     R1,R1,0x00000044
E9000019	//		BNE     fail

	// read the 4 bytes as a word
81000000	//		LDW     R1,R0,+00000
62004433	//		MOV     R2,0x44330000
42262211	//		IOR     R2,R2,0x00002211
02290001	//		SUB     R2,R2,R1
E9000014	//		BNE     fail

	// write 4 bytes as a word
5117FFFF	//		XOR     R1,R1,0xFFFFFFFF
A1000000	//		STW     R1,R0,+00000

	// read 4 bytes from the same word at different offsets
91000000	//		LDB     R1,R0,+00000
411900EE	//		SUB     R1,R1,0x000000EE
E900000F	//		BNE     fail
91000001	//		LDB     R1,R0,+00001
411900DD	//		SUB     R1,R1,0x000000DD
E900000C	//		BNE     fail
91000002	//		LDB     R1,R0,+00002
411900CC	//		SUB     R1,R1,0x000000CC
E9000009	//		BNE     fail
91000003	//		LDB     R1,R0,+00003
411900BB	//		SUB     R1,R1,0x000000BB
E9000006	//		BNE     fail

	// read 4 bytes as a word
81000000	//		LDW     R1,R0,+00000
6200BBCC	//		MOV     R2,0xBBCC0000
4226DDEE	//		IOR     R2,R2,0x0000DDEE
02290001	//		SUB     R2,R2,R1
E9000001	//		BNE     fail
E7000004	//		B       succ

	// failure, rightmost LED on
5000FFC4	//	fail:	MOV     R0,0xFFFFFFC4
41000001	//		MOV     R1,0x00000001
A1000000	//		STW     R1,R0,+00000
E7FFFFFF	//	loop1:	B       loop1

	// success, leftmost LED on
5000FFC4	//	succ:	MOV     R0,0xFFFFFFC4
41000080	//		MOV     R1,0x00000080
A1000000	//		STW     R1,R0,+00000
E7FFFFFF	//	loop2:	B       loop2

00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
00000000
